!function(){function e(){$("#select_categorie").empty(),$("#select_categorie_product").empty(),$("#select_categorie_product").append("<option></option>"),$.ajax({url:"/load_categories",type:"post",contentType:"application/json",data:JSON.stringify({}),success:function(e){try{if(0==e.data.length)console.log("Aun no hay subcategorias");else for(var t=e.data,a=0;a<t.length;a++)$("#select_categorie").append('<option value="'+t[a]._id+'">'+t[a].name+"</option>"),$("#select_categorie_product").append('<option value="'+t[a]._id+'">'+t[a].name+"</option>")}catch(n){console.log(n)}},error:function(e){console.log(e.responseJSON.message)}})}function t(){$(".alert.alert-warning.contents").fadeOut(),$.ajax({url:"/load_categories",type:"post",contentType:"application/json",data:JSON.stringify({}),success:function(e){try{if(0==e.data.length)$(".alert.alert-warning.contents").fadeIn(),$("#thead_categories").css("display","none");else{$("#thead_categories").css("display",""),$("#tbody_categories").empty();for(var t=e.data,a=0;a<t.length;a++){var n=_.truncate(t[a].description,{length:50,omission:" [...]"});$("#tbody_categories").append("<tr><td>"+(a+1)+"</td><td>"+t[a].name+"</td><td>"+n+'</td><td><a id="btn_update_categorie" value="'+t[a]._id+'" href="javascript:;" class="btn c-theme-btn btn-xs" style="padding: 1px 3px 1px 8px;"><i class="fa fa-edit"></i></a></td></tr>')}}}catch(o){console.log(o)}},error:function(e){console.log(e.responseJSON.message)}})}function a(e){$(".alert.alert-warning.products").fadeOut(),$.ajax({url:"/load_products",type:"post",contentType:"application/json",data:JSON.stringify({page:e}),success:function(e){console.log(e);var t=e.objpagination;try{if(0==e.data.length)$(".alert.alert-warning.products").fadeIn(),$("#thead_products").css("display","none");else{$("#thead_products").css("display",""),$("#tbody_products").empty();for(var a=e.data,n=0;n<a.length;n++){var o=_.truncate(a[n].name,{length:50,omission:" [...]"}),i="";a[n].subcategorie_id.name&&(i=a[n].subcategorie_id.name),$("#tbody_products").append('<tr><td><a id="btn_view_product_variables" value="'+a[n]._id+'" href="javascript:;" class="btn btn-default btn-xs" style="padding: 1px 3px 1px 8px;"><i class="fa fa-info-circle"></i></a></td><td>'+a[n].categorie_id.name+"</td><td>"+i+"</td><td>"+o+"</td><td>"+a[n].stock+'</td><td><a id="btn_update_product" value="'+a[n]._id+'" href="javascript:;" class="btn c-theme-btn btn-xs" style="padding: 1px 3px 1px 8px;"><i class="fa fa-edit"></i></a><a id="btn_remove_product" value="'+a[n]._id+'" href="javascript:;" class="btn c-theme-btn btn-xs" style="padding: 1px 3px 1px 8px;"><i class="fa fa-trash"></i></a></td></tr>')}var s=JST.pagination({pagination:t});$("#pagination_products").html(s)}}catch(c){console.log(c)}},error:function(e){console.log(e.responseJSON.message)}})}function n(){$(".alert.alert-warning.subcategories").fadeOut(),$.ajax({url:"/load_subcategories",type:"post",contentType:"application/json",data:JSON.stringify({}),success:function(e){console.log(e);try{if(0==e.data.length)$(".alert.alert-warning.subcategories").fadeIn(),$("#thead_subcategories").css("display","none");else{$("#thead_subcategories").css("display",""),$("#tbody_subcategories").empty();for(var t=e.data,a=0;a<t.length;a++){var n=_.truncate(t[a].description,{length:50,omission:" [...]"});$("#tbody_subcategories").append("<tr><td>"+(a+1)+"</td><td>"+t[a].name+"</td><td>"+n+"</td><td>"+t[a].categorie_id.name+'</td><td><a id="btn_update_subcategorie" value="'+t[a]._id+'" href="javascript:;" class="btn c-theme-btn btn-xs" style="padding: 1px 3px 1px 8px;"><i class="fa fa-edit"></i></a></td></tr>')}}}catch(o){console.log(o)}},error:function(e){console.log(e.responseJSON.message)}})}function o(){$("#input_categorie_image_url").val(""),$("#input_subcategorie_image_url").val(""),$("#load_image_span_categorie").text(""),$("#load_image_span_subcategorie").text(""),$("#load_image_span_content").text(""),$("#input_content_image_url").text(""),$("#load_image_brands_span").text(""),$("#load_image_brands_span").text(""),$("#input_categorie_name").val(""),$("#input_categorie_description").val(""),$("#summernote01").summernote("code","")}function i(){$("#input_categorie_image_url").val(""),$("#input_subcategorie_image_url").val(""),$("#load_image_span_categorie").text(""),$("#load_image_span_subcategorie").text(""),$("#load_image_span_content").text(""),$("#input_content_image_url").text(""),$("#load_image_brands_span").text(""),$("#load_image_brands_span").text(""),$("#load_image_brands_span").text(""),$("#input_subcategorie_name").val(""),$("#input_subcategorie_description").val(""),$("#summernote02").summernote("code","")}function s(){$("#input_categorie_image_url").val(""),$("#input_subcategorie_image_url").val(""),$("#load_image_span_categorie").text(""),$("#load_image_span_subcategorie").text(""),$("#load_image_span_content").text(""),$("#input_content_image_url").text(""),$("#load_image_brands_span").text(""),$("#load_image_brands_span").text(""),$("#load_image_brands_span").text(""),$("#input_product_name").val(""),$("#input_product_code").val(""),$("#input_product_price").val(""),$("#select_categorie_product option:first").prop("selected",!0),$("#select_subcategorie_product").empty(),$('input[name="variable_product"]').prop("checked",!1),$("#images_upload").empty(),$("#input_product_stock").val(""),$("#tbody_variable").empty(),$("#summernote03").summernote("code","")}function c(){$(".c-dropdown-menu").find("li").each(function(){$(this).removeClass("c-active")})}function r(){$("#images_upload").find(".btn_principalimage").each(function(){$(this).find(".badge.badge-danger").css("background-color","")})}function d(){var e=0;$("#tbody_variable").find("tr").each(function(){e++,$(this).find("td:nth-child(1)").text(e)})}$("body").on("click","#btn_subcategories",function(){c(),$(this).addClass("c-active"),$("#my_contents_section").css("display","none"),$("#categories_section").css("display","none"),$("#products_section").css("display","none"),$("#subcategories_section").css("display","block"),$("#edit_add_update_subcategories").fadeOut(),n(),setTimeout(function(){$("#my_subcategories").fadeIn()},400)}),$("body").on("click","#btn_products",function(){c(),e(),$(this).addClass("c-active"),$("#my_contents_section").css("display","none"),$("#categories_section").css("display","none"),$("#subcategories_section").css("display","none"),$("#products_section").css("display","block"),$("#edit_add_update_products").fadeOut(),a(),setTimeout(function(){$("#my_products").fadeIn()},400)}),$("body").on("click","#btn_categories",function(){o(),c(),$(this).addClass("c-active"),$("#my_contents_section").css("display","none"),$("#products_section").css("display","none"),$("#subcategories_section").css("display","none"),$("#categories_section").css("display","block"),$("#edit_add_update_categories").fadeOut(),t(),setTimeout(function(){$("#my_categories").fadeIn()},400)}),$("body").on("click","#btn_contents",function(){c(),$(this).addClass("c-active"),$("#categories_section").css("display","none"),$("#products_section").css("display","none"),$("#subcategories_section").css("display","none"),$("#my_contents_section").css("display","block"),$("#edit_my_contents").fadeOut(),setTimeout(function(){$("#my_contents").fadeIn()},400)}),$("body").on("click","#btn_deleteimage",function(){var e=this,t=e.parentNode;$(t).remove()}),$("body").on("click","#btn_update_subcategorie_info",function(){$(".alert.alert-danger.subcategories").fadeOut(),$(".alert.alert-success.subcategories").fadeOut(),$(".alert.alert-success.subcategories02").fadeOut(),$(".alert.alert-warning.subcategories").fadeOut(),$(".alert.alert-danger.subcategories02").fadeOut();var e=$("#input_subcategorie_selected").val(),t=$("#select_categorie").val(),a=$("#input_subcategorie_name").val(),o=$("#input_subcategorie_description").val(),s=$("#summernote02").summernote("code");a?$.ajax({url:"/update_subcategorie",type:"post",contentType:"application/json",data:JSON.stringify({_id:e,categorie_id:t,name:a,description:o,content:s}),success:function(e){n(),$(".alert.alert-success.subcategories02").fadeIn(),i(),setTimeout(function(){$(".alert.alert-success.subcategories02").fadeOut(),$("#edit_add_update_subcategories").fadeOut(),setTimeout(function(){$("#my_subcategories").fadeIn()},400)},3e3)},error:function(e){console.log(e.responseJSON.message),$(".alert.alert-danger.subcategories02").fadeIn()}}):$(".alert.alert-warning.subcategories").fadeIn()}),$("body").on("click","#btn_update_categorie_info",function(){$(".alert.alert-danger.categories").fadeOut(),$(".alert.alert-success.categories").fadeOut(),$(".alert.alert-success.categories02").fadeOut(),$(".alert.alert-warning.categories").fadeOut(),$(".alert.alert-danger.categories02").fadeOut();var a=$("#input_categorie_selected").val(),n=$("#input_categorie_name").val(),i=$("#input_categorie_description").val(),s=$("#summernote01").summernote("code");n?$.ajax({url:"/update_categorie",type:"post",contentType:"application/json",data:JSON.stringify({_id:a,name:n,description:i,content:s}),success:function(a){t(),e(),$(".alert.alert-success.categories02").fadeIn(),o(),setTimeout(function(){$(".alert.alert-success.categories02").fadeOut(),$("#edit_add_update_categories").fadeOut(),setTimeout(function(){$("#my_categories").fadeIn()},400)},3e3)},error:function(e){console.log(e.responseJSON.message),$(".alert.alert-danger.categories02").fadeIn()}}):$(".alert.alert-warning.categories").fadeIn()}),$("body").on("click","#btn_add_subcategorie",function(){$(".alert.alert-danger.subcategories").fadeOut(),$(".alert.alert-success.subcategories").fadeOut(),$(".alert.alert-warning.subcategories").fadeOut(),$(".alert.alert-danger.subcategories02").fadeOut();var e=$("#select_categorie").val(),t=$("#input_subcategorie_name").val(),a=$("#input_subcategorie_description").val(),o=$("#summernote02").summernote("code");t?$.ajax({url:"/register_new_subsubcategorie",type:"post",contentType:"application/json",data:JSON.stringify({categorie_id:e,name:t,description:a,content:o}),success:function(e){n(),$(".alert.alert-success.subcategories").fadeIn(),i(),setTimeout(function(){$("#edit_add_update_subcategories").fadeOut(),setTimeout(function(){$("#my_subcategories").fadeIn()},400)},3e3)},error:function(e){console.log(e.responseJSON.message),$(".alert.alert-danger.subcategories02").fadeIn()}}):$(".alert.alert-warning.subcategories").fadeIn()}),$("body").on("click","#btn_add_categorie",function(){$(".alert.alert-danger.categories").fadeOut(),$(".alert.alert-success.categories").fadeOut(),$(".alert.alert-warning.categories").fadeOut(),$(".alert.alert-danger.categories02").fadeOut();var a=$("#input_categorie_name").val(),n=$("#input_categorie_description").val(),i=$("#summernote01").summernote("code");a?$.ajax({url:"/register_new_categorie",type:"post",contentType:"application/json",data:JSON.stringify({name:a,description:n,content:i}),success:function(a){t(),e(),$(".alert.alert-success.categories").fadeIn(),o(),setTimeout(function(){$("#edit_add_update_categories").fadeOut(),setTimeout(function(){$("#my_categories").fadeIn()},400)},3e3)},error:function(e){console.log(e.responseJSON.message),$(".alert.alert-danger.categories02").fadeIn()}}):$(".alert.alert-warning.categories").fadeIn()}),$("body").on("click","#btn_update_subcategorie",function(){var e=$(this).attr("value");$("#input_subcategorie_selected").val(e),$("#btn_add_subcategorie").attr("id","btn_update_subcategorie_info"),$(".alert.alert-danger.subcategories").fadeOut(),$(".alert.alert-success.subcategories").fadeOut(),$(".alert.alert-warning.subcategories").fadeOut(),$(".alert.alert-danger.subcategories02").fadeOut(),$("#my_subcategories").fadeOut(),i(),$.ajax({url:"/load_subcategories_by_id",type:"post",contentType:"application/json",data:JSON.stringify({subcategorie_id:e}),success:function(e){setTimeout(function(){$("#edit_add_update_subcategories").fadeIn()},400);var t=e.data,a=t.categorie_id,n=t.name,o=t.description,i=t.content;$("#input_subcategorie_name").val(n),$("#input_subcategorie_description").val(o),$("#summernote02").summernote("code",i),$('#select_categorie option[value="'+a+'"]').prop("selected",!0)},error:function(e){console.log(e.responseJSON.message)}})}),$("body").on("click","#btn_update_categorie",function(){var e=$(this).attr("value");$("#input_categorie_selected").val(e),$("#btn_add_categorie").attr("id","btn_update_categorie_info"),$(".alert.alert-danger.categories").fadeOut(),$(".alert.alert-success.categories").fadeOut(),$(".alert.alert-warning.categories").fadeOut(),$(".alert.alert-danger.categories02").fadeOut(),$("#my_categories").fadeOut(),$.ajax({url:"/load_categories_by_id",type:"post",contentType:"application/json",data:JSON.stringify({categorie_id:e}),success:function(e){setTimeout(function(){$("#edit_add_update_categories").fadeIn()},400);var t=e.data,a=t.name,n=t.description,o=t.content;$("#input_categorie_name").val(a),$("#input_categorie_description").val(n),$("#summernote01").summernote("code",o)},error:function(e){console.log(e.responseJSON.message)}})}),$("body").on("click","#btn_add_new_categorie",function(){o(),$("#btn_update_categorie_info").attr("id","btn_add_categorie"),$(".alert.alert-danger.categories").fadeOut(),$(".alert.alert-success.categories").fadeOut(),$(".alert.alert-warning.categories").fadeOut(),$(".alert.alert-danger.categories02").fadeOut(),$("#my_categories").fadeOut(),setTimeout(function(){$("#edit_add_update_categories").fadeIn()},400)}),$("body").on("click","#btn_add_new_subcategorie",function(){i(),$("#btn_update_subcategorie_info").attr("id","btn_add_subcategorie"),$(".alert.alert-danger.subcategories").fadeOut(),$(".alert.alert-success.subcategories").fadeOut(),$(".alert.alert-warning.subcategories").fadeOut(),$(".alert.alert-danger.subcategories02").fadeOut(),$("#my_subcategories").fadeOut(),setTimeout(function(){$("#edit_add_update_subcategories").fadeIn()},400)}),$("body").on("click","#btn_add_new_product",function(){s(),$("#btn_update_product_info").attr("id","btn_add_product"),$(".alert.alert-danger.products").fadeOut(),$(".alert.alert-success.products").fadeOut(),$(".alert.alert-warning.products").fadeOut(),$(".alert.alert-danger.products02").fadeOut(),$("#images_upload").empty(),$("#my_products").fadeOut(),setTimeout(function(){$("#edit_add_update_products").fadeIn()},400)}),$("body").on("click","#btn_update_content",function(){var e=this,t=e.parentNode.parentNode,a=$(t).find("td:nth-child(2)").text();$("#input_content").val(a),$("#my_profile_section").css("display","block"),$("#my_contents").fadeOut(),"MARCAS"==a?($("#content_without_brands").fadeOut(),$("#content_with_brands").fadeIn()):($("#content_without_brands").fadeIn(),$("#content_with_brands").fadeOut()),$.ajax({url:"/get_content_body_info",type:"post",contentType:"application/json",data:JSON.stringify({content_description:a}),success:function(e){$("#summernote").summernote("code",""),$("#input_content_subtitle").val("");try{var t=e.data;$("#input_content_subtitle").val(t.subtitle),t&&$("#summernote").summernote("code",t.content_body)}catch(a){console.log("err")}setTimeout(function(){$("#edit_my_contents").fadeIn()},400)},error:function(e){console.log(e.responseJSON.message)}})}),$("body").on("click","#btn_update_content_body",function(){var e=$("#input_content").val(),t=$("#input_content_subtitle").val(),a=$("#summernote").summernote("code"),n=[];$("#images_brands_upload").find(".col-md-3").each(function(){var e=($(this).find(".badge.badge-danger").css("background-color"),$(this).find("#document_type").val()),t=$(this).find("#document_id").val(),a=$(this).find("#document_url").val(),o=$(this).find("#document_url_thumb").val();n.push({document_type:e,document_id:t,document_url:a,document_url_thumb:o})}),$.ajax({url:"/update_content_body",type:"post",contentType:"application/json",data:JSON.stringify({content_description:e,content_body:a,subtitle:t,image:n}),success:function(e){console.log(e),$("#summernote").summernote("code",""),$("#input_content_subtitle").val(""),$("#images_brands_upload").empty(),$(".alert.alert-success").fadeIn(),setTimeout(function(){$("#edit_my_contents").fadeOut(),$(".alert.alert-success").fadeOut(),setTimeout(function(){$("#my_contents").fadeIn()},400)},2e3)},error:function(e){alert(e.responseJSON.message)}})}),$("body").on("click","#btn_view_product_variables",function(){var e=$(this).attr("value"),t=this,a=t.parentNode.parentNode;console.log(a),$.ajax({url:"/load_product_by_id",type:"post",contentType:"application/json",data:JSON.stringify({product_id:e}),success:function(e){console.log(e);var t=(e.data._id,e.data.variables);if(console.log(t),t.length)for(var n=0;n<t.length;n++)$(a).after("<tr><td>"+(t.length-n)+"</td><td>"+t[n].variable_code+"</td><td>"+t[n].variable_name+"</td><td>"+Number(t[n].variable_price).toFixed(2)+"</td><td>"+t[n].variable_stock+"</td><td></td></tr>"),console.log("dtat",n,t.length),n+1==t.length&&$(a).after('<tr><th style="font-weight: 500;">#</th><th style="font-weight: 500;">Codigo</th><th style="font-weight: 500;">Presentación</th><th style="font-weight: 500;">Precio</th><th style="font-weight: 500;">Stock</th><th style="font-weight: 500;"></th></tr>')},error:function(e){console.log(e.responseJSON.message),$(".alert.alert-danger.products02").fadeIn()}})}),$("body").on("click","#btn_remove_product",function(){var e=$(this).attr("value"),t=confirm("¿Está seguro se realizar esta acción?");1==t&&$.ajax({url:"/remove_product",type:"post",contentType:"application/json",data:JSON.stringify({product_id:e}),success:function(e){alert(e.message),a()},error:function(e){console.log(e.responseJSON.message)}})}),$("body").on("click","#pagination_products .pagination li a",function(){var e=$(this).attr("data-page");a(e)}),$("body").on("click","#variable_product",function(){var e=$('input[name="variable_product"]:checked').val();"with_variables"==e?($("#with_variables").fadeIn(),$("#no_variables").css("display","none")):($("#no_variables").fadeIn(),$("#with_variables").css("display","none"))}),$("body").on("click","#btn_add_variable",function(){$("#tbody_variable").append('<tr><td></td><td><input type="text" class="form-control c-square c-theme"/></td><td><input type="text" class="form-control c-square c-theme"/></td><td><input type="text" class="form-control c-square c-theme"/></td><td><input type="text" class="form-control c-square c-theme"/></td><td><a id="btn_remove_variable" href="javascript:;" class="btn c-theme-btn btn-xs" style="padding: 1px 3px 1px 8px;"><i class="fa fa-trash"></i></a></td></tr>'),d()}),$("body").on("click","#btn_remove_variable",function(){var e=this,t=e.parentNode.parentNode;$(t).remove(),d()}),$("body").on("change","#select_categorie_product",function(){$("#select_subcategorie_product").empty();var e=$(this).val();$.ajax({url:"/load_subcategories_by_categorieid",type:"post",contentType:"application/json",data:JSON.stringify({categorie_id:e}),success:function(e){var t=e.data;if(t){$("#select_subcategorie_product").append("<option></option>");for(var a=0;a<t.length;a++)$("#select_subcategorie_product").append('<option value="'+t[a]._id+'">'+t[a].name+"</option>")}},error:function(e){console.log(e.responseJSON.message)}})}),$("body").on("click",".btn_principalimage",function(){r(),$(this).find(".badge.badge-danger").css("background-color","#f6f92e")}),$("body").on("click","#btn_add_product",function(){$(".alert.alert-danger.products02").fadeOut(),$(".alert.alert-danger.products").fadeOut(),$(".alert.alert-warning.products").fadeOut(),$(".alert.alert-success.products").fadeOut(),$(".alert.alert-success.products02").fadeOut();var e=$("#input_product_name").val(),t=$("#select_categorie_product").val(),n=$("#select_subcategorie_product").val(),o=$("#summernote03").summernote("code"),i=($("#tbody_variable").val(),[]);$("#images_upload").find(".col-md-3").each(function(){var e,t=$(this).find(".badge.badge-danger").css("background-color");e="rgb(246, 249, 46)"==t||"#f6f92e"==t?"principal":"";var a=$(this).find("#document_type").val(),n=$(this).find("#document_id").val(),o=$(this).find("#document_url").val(),s=$(this).find("#document_url_thumb").val();i.push({principal:e,document_type:a,document_id:n,document_url:o,document_url_thumb:s})});var c,r=[],d=($('input[name="variable_product"]:checked').val(),"disable;");e&&t&&o&&0!=i.length?(stock=0,$("#tbody_variable").find("tr").each(function(){var e=$(this).find("td:nth-child(2) input").val(),t=$(this).find("td:nth-child(3) input").val(),a=$(this).find("td:nth-child(4) input").val(),n=$(this).find("td:nth-child(5) input").val();stock=Number(a)+stock,r.push({variable_code:e,variable_name:t,variable_stock:a,variable_price:n})}),c={name:e,stock:stock,categorie_id:t,subcategorie_id:n,variables:r,content:o,image:i},console.log(c),d="enable"):d="disable","enable"==d?$.ajax({url:"/register_new_product",type:"post",contentType:"application/json",data:JSON.stringify(c),success:function(e){s(),$(".alert.alert-success.products").fadeIn(),a(),setTimeout(function(){$(".alert.alert-success.products").fadeOut(),$("#edit_add_update_products").fadeOut(),setTimeout(function(){$("#my_products").fadeIn()},400)},2e3)},error:function(e){console.log(e.responseJSON.message),$(".alert.alert-danger.products02").fadeIn()}}):$(".alert.alert-warning.products").fadeIn()}),$("body").on("click","#btn_update_product_info",function(){$(".alert.alert-danger.products02").fadeOut(),$(".alert.alert-danger.products").fadeOut(),$(".alert.alert-warning.products").fadeOut(),$(".alert.alert-success.products").fadeOut(),$(".alert.alert-success.products02").fadeOut();var e=$("#input_product_selected").val(),t=$("#input_product_name").val(),n=$("#select_categorie_product").val(),o=$("#select_subcategorie_product").val(),i=$("#summernote03").summernote("code"),c=($("#tbody_variable").val(),[]);$("#images_upload").find(".col-md-3").each(function(){var e,t=$(this).find(".badge.badge-danger").css("background-color");e="rgb(246, 249, 46)"==t||"#f6f92e"==t?"principal":"";var a=$(this).find("#document_type").val(),n=$(this).find("#document_id").val(),o=$(this).find("#document_url").val(),i=$(this).find("#document_url_thumb").val();c.push({principal:e,document_type:a,document_id:n,document_url:o,document_url_thumb:i})});var r,d=[],u="disable;";t&&n&&i&&0!=c.length?(stock=0,$("#tbody_variable").find("tr").each(function(){var e=$(this).find("td:nth-child(2) input").val(),t=$(this).find("td:nth-child(3) input").val(),a=$(this).find("td:nth-child(4) input").val(),n=$(this).find("td:nth-child(5) input").val();stock=Number(a)+stock,d.push({variable_code:e,variable_name:t,variable_stock:a,variable_price:n})}),r={product_id:e,name:t,stock:stock,categorie_id:n,subcategorie_id:o,variables:d,content:i,image:c},console.log(r),u="enable"):u="disable","enable"==u?$.ajax({url:"/update_product",type:"post",contentType:"application/json",data:JSON.stringify(r),success:function(e){s(),$(".alert.alert-success.products02").fadeIn(),a(),setTimeout(function(){$(".alert.alert-success.products02").fadeOut(),$("#edit_add_update_products").fadeOut(),setTimeout(function(){$("#my_products").fadeIn()},400)},2e3)},error:function(e){console.log(e.responseJSON.message),$(".alert.alert-danger.products02").fadeIn()}}):$(".alert.alert-warning.products").fadeIn()}),$("body").on("click","#btn_update_product",function(){$("#btn_add_product").prop("id","btn_update_product_info");var e=$(this).attr("value");$("#input_product_selected").val(e),s(),$(".alert.alert-danger.products").fadeOut(),$(".alert.alert-success.products").fadeOut(),$(".alert.alert-warning.products").fadeOut(),$(".alert.alert-danger.products02").fadeOut(),$("#my_products").fadeOut(),$.ajax({url:"/load_product_by_id",type:"post",contentType:"application/json",data:JSON.stringify({product_id:e}),success:function(e){console.log(e);var t=(e.data._id,e.data.categorie_id),a=e.data.content,n=e.data.image,o=e.data.name,i=(e.data.stock,e.data.subcategorie_id),s=e.data.variables;if(s.length)for(var c=0;c<s.length;c++)$("#tbody_variable").append('<tr><td>1</td><td><input type="text" class="form-control c-square c-theme" value="'+s[c].variable_code+'"></td><td><input type="text" class="form-control c-square c-theme" value="'+s[c].variable_name+'"></td><td><input type="text" class="form-control c-square c-theme" value="'+s[c].variable_stock+'"></td><td><input type="text" class="form-control c-square c-theme" value="'+s[c].variable_price+'"></td><td><a id="btn_remove_variable" href="javascript:;" class="btn c-theme-btn btn-xs" style="padding: 1px 3px 1px 8px;"><i class="fa fa-trash"></i></a></td></tr>');if(n.length){$("#images_upload").fadeIn();for(var c=0;c<n.length;c++){var r=n[c].document_id,d=n[c].document_type,u=n[c].document_url,l=n[c].document_url_thumb,p=n[c].principal;"principal"==p?$("#images_upload").append('<div class="col-md-3" style="background-image: url('+l+');background-repeat: no-repeat; height: 99px;"><a href="javascript:;" class="btn_principalimage" style="margin-right: 10px; margin-top:1em;"><span class="badge badge-danger" style="background-color: rgb(246, 249, 46);"><i class="fa fa-star"></i></span></a><a href="javascript:;" id="btn_deleteimage"><span class="badge badge-danger"><i class="fa fa-close"></i></span></a><input type="hidden" id="document_type" value="'+d+'" /><input type="hidden" id="document_id" value="'+r+'" /><input type="hidden" id="document_url" value="'+u+'" /><input type="hidden" id="document_url_thumb" value="'+l+'" /></div>'):$("#images_upload").append('<div class="col-md-3" style="background-image: url('+l+');background-repeat: no-repeat; height: 99px;"><a href="javascript:;" class="btn_principalimage" style="margin-right: 10px; margin-top:1em;"><span class="badge badge-danger"><i class="fa fa-star"></i></span></a><a href="javascript:;" id="btn_deleteimage"><span class="badge badge-danger"><i class="fa fa-close"></i></span></a><input type="hidden" id="document_type" value="'+d+'" /><input type="hidden" id="document_id" value="'+r+'" /><input type="hidden" id="document_url" value="'+u+'" /><input type="hidden" id="document_url_thumb" value="'+l+'" /></div>')}}$("#input_product_name").val(o),$("#summernote03").summernote("code",a),$('#select_categorie_product option[value="'+t+'"]').prop("selected",!0),$.ajax({url:"/load_subcategories_by_categorieid",type:"post",contentType:"application/json",data:JSON.stringify({categorie_id:t}),success:function(e){var t=e.data;if(t){$("#select_subcategorie_product").append("<option></option>");for(var a=0;a<t.length;a++)$("#select_subcategorie_product").append('<option value="'+t[a]._id+'">'+t[a].name+"</option>")}$('#select_subcategorie_product option[value="'+i+'"]').prop("selected",!0)},error:function(e){console.log(e.responseJSON.message)}}),setTimeout(function(){$("#edit_add_update_products").fadeIn()},400)},error:function(e){console.log(e.responseJSON.message),$(".alert.alert-danger.products02").fadeIn()}})}),$(document).ready(function(){e()})}();