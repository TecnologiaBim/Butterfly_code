function load_products(c){$.ajax({url:"/load_products",type:"post",contentType:"application/json",data:JSON.stringify({page:c}),success:function(c){console.log(c),$("#product_list").empty();for(var t=c.data,e=0,o=0,a=c.objpagination,r=0;r<t.length;r++){var i=t[r]._id,n=t[r].name,s=(t[r].code,t[r].price),d=(t[r].stock,t[r].categorie_id,t[r].subcategorie_id,t[r].image),l=get_principal_image(d),p="";try{p=l.document_url?l.document_url:""}catch(b){p=""}e++;var g=e%4;0==r&&(o++,$("#product_list").append('<div class="row"><div class="row_'+o+'"></div></div>')),0==g&&(o++,$("#product_list").append('<div class="row"><div class="row_'+o+'"></div></div>')),0!=r&&1!=r&&2!=r&&3!=r||$("#product_list").find(".row_1").append('<div class="col-md-3 col-sm-6 c-margin-b-20"><div class="c-content-product-2 c-bg-white c-border"><div class="c-content-overlay"><!--<div class="c-label c-bg-red c-font-uppercase c-font-white c-font-13 c-font-bold">Sale</div>--><div class="c-overlay-wrapper"><div class="c-overlay-content"><a href="/view_product/'+i+'" class="btn btn-md c-btn-grey-1 c-btn-uppercase c-btn-bold c-btn-border-1x c-btn-square">Visualizar</a></div></div><div data-height="height" style="height: 230px; background-image: url('+p+');" class="c-bg-img-center c-overlay-object"></div></div><div class="c-info" style="height: 60px;"><p class="c-title c-font-16 c-font-slim">'+n+'</p><!--<p class="c-price c-font-14 c-font-slim">S/. '+s+'  <span class="c-font-14 c-font-line-through c-font-red">$600</span></p>--></div><div role="group" class="btn-group btn-group-justified"><div role="group" class="btn-group c-border-top"><a href="javascript:;" id="btn_add_whishlist" value="'+i+'" class="btn btn-sm c-btn-white c-btn-uppercase c-btn-square c-font-grey-3 c-font-white-hover c-bg-red-2-hover c-btn-product">Favorito</a></div><div role="group" class="btn-group c-border-left c-border-top"><a href="javascript:;" id="btn_add_cart" value="'+i+'" class="btn btn-sm c-btn-white c-btn-uppercase c-btn-square c-font-grey-3 c-font-white-hover c-bg-red-2-hover c-btn-product">Carrito</a></div></div></div></div>'),4!=r&&5!=r&&6!=r&&7!=r||$("#product_list").find(".row_2").append('<div class="col-md-3 col-sm-6 c-margin-b-20"><div class="c-content-product-2 c-bg-white c-border"><div class="c-content-overlay"><!--<div class="c-label c-bg-red c-font-uppercase c-font-white c-font-13 c-font-bold">Sale</div>--><div class="c-overlay-wrapper"><div class="c-overlay-content"><a href="/view_product/'+i+'" class="btn btn-md c-btn-grey-1 c-btn-uppercase c-btn-bold c-btn-border-1x c-btn-square">Visualizar</a></div></div><div data-height="height" style="height: 230px; background-image: url('+p+');" class="c-bg-img-center c-overlay-object"></div></div><div class="c-info" style="height: 60px;"><p class="c-title c-font-16 c-font-slim">'+n+'</p><!--<p class="c-price c-font-14 c-font-slim">S/. '+s+'  <span class="c-font-14 c-font-line-through c-font-red">$600</span></p>--></div><div role="group" class="btn-group btn-group-justified"><div role="group" class="btn-group c-border-top"><a href="javascript:;" id="btn_add_whishlist" value="'+i+'" class="btn btn-sm c-btn-white c-btn-uppercase c-btn-square c-font-grey-3 c-font-white-hover c-bg-red-2-hover c-btn-product">Favorito</a></div><div role="group" class="btn-group c-border-left c-border-top"><a href="javascript:;" id="btn_add_cart" value="'+i+'" class="btn btn-sm c-btn-white c-btn-uppercase c-btn-square c-font-grey-3 c-font-white-hover c-bg-red-2-hover c-btn-product">Carrito</a></div></div></div></div>'),8!=r&&9!=r&&10!=r&&11!=r||$("#product_list").find(".row_3").append('<div class="col-md-3 col-sm-6 c-margin-b-20"><div class="c-content-product-2 c-bg-white c-border"><div class="c-content-overlay"><!--<div class="c-label c-bg-red c-font-uppercase c-font-white c-font-13 c-font-bold">Sale</div>--><div class="c-overlay-wrapper"><div class="c-overlay-content"><a href="/view_product/'+i+'" class="btn btn-md c-btn-grey-1 c-btn-uppercase c-btn-bold c-btn-border-1x c-btn-square">Visualizar</a></div></div><div data-height="height" style="height: 230px; background-image: url('+p+');" class="c-bg-img-center c-overlay-object"></div></div><div class="c-info" style="height: 60px;"><p class="c-title c-font-16 c-font-slim">'+n+'</p><!--<p class="c-price c-font-14 c-font-slim">S/. '+s+'  <span class="c-font-14 c-font-line-through c-font-red">$600</span></p>--></div><div role="group" class="btn-group btn-group-justified"><div role="group" class="btn-group c-border-top"><a href="javascript:;" id="btn_add_whishlist" value="'+i+'" class="btn btn-sm c-btn-white c-btn-uppercase c-btn-square c-font-grey-3 c-font-white-hover c-bg-red-2-hover c-btn-product">Favorito</a></div><div role="group" class="btn-group c-border-left c-border-top"><a href="javascript:;" id="btn_add_cart" value="'+i+'" class="btn btn-sm c-btn-white c-btn-uppercase c-btn-square c-font-grey-3 c-font-white-hover c-bg-red-2-hover c-btn-product">Carrito</a></div></div></div></div>')}var u=JST.pagination({pagination:a});$("#pagination_products").html(u)},error:function(c){console.log(c.responseJSON.message)}})}function get_principal_image(c){for(var t=0;t<c.length;t++){if("principal"==c[t].principal)return c[t];if(t=c.length)return c[0]}}function load_subcategories(){$.ajax({url:"/load_subcategories",type:"post",contentType:"application/json",data:JSON.stringify({}),success:function(c){console.log(c)},error:function(c){console.log(c.responseJSON.message)}})}function load_categories(){$.ajax({url:"/load_categories",type:"post",contentType:"application/json",data:JSON.stringify({}),success:function(c){for(var t=c.data,e=0;e<t.length;e++)$("#categorie_list").append('<li class="c-dropdown"><a id="load_subcategories_by_categorieid" href="javascript:;" class="c-toggler" value="'+t[e]._id+'">'+t[e].name+'<span class="c-arrow"></span></a><ul class="c-dropdown-menu"></ul></li>')},error:function(c){console.log(c.responseJSON.message)}})}var click_categorie="";$("body").on("click",".c-arrow",function(){click_categorie||(click_categorie="c-arrow");var c=this,t=c.parentNode.parentNode,e=c.parentNode,o=$(e).attr("value");"c-arrow"==click_categorie&&$.ajax({url:"/load_subcategories_by_categorieid",type:"post",contentType:"application/json",data:JSON.stringify({categorie_id:o}),success:function(c){var e=c.data,a=$(t).prop("class");0!=e.length?"c-dropdown c-open"==a?$(t).prop("class","c-dropdown"):$(t).prop("class","c-dropdown c-open"):($(t).prop("class",""),window.location.href="/categorie/"+o),$(t).find("ul").empty();for(var r=0;r<e.length;r++)$(t).find("ul").append('<li><a href="/subcategorie/'+e[r]._id+'">'+e[r].name+"</a></li>");click_categorie=""},error:function(c){console.log(c.responseJSON.message)}})}),$("body").on("click","#pagination_products .pagination li a",function(){var c=$(this).attr("data-page");load_products(c)}),$("body").on("click","#load_subcategories_by_categorieid",function(){var c=this,t=(c.parentNode,$(this).attr("value"));click_categorie||(click_categorie="load_subcategories_by_categorieid"),"load_subcategories_by_categorieid"==click_categorie&&(window.location.href="/categorie/"+t)});